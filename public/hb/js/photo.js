!function(t){function s(i){if(o[i])return o[i].exports;var e=o[i]={exports:{},id:i,loaded:!1};return t[i].call(e.exports,e,e.exports,s),e.loaded=!0,e.exports}var o={};return s.m=t,s.c=o,s.p="",s(0)}([function(t,s){"use strict";var o={requestNum:0,photoNum:0,myScroll:!0,init:function(){this._setConfig(),this._setDom(),this._bindEvent(),this._getPhotosDate(),this._getAlbumsDate()},_setConfig:function(){},_setDom:function(){$(".picture").css("min-height",$("body").height()-295)},_bindEvent:function(){var t=this,s=!1;$(".search-bar").find("img").on("mouseover",function(){s||$(".search-bar").animate({width:"150px"},500)}),$(".search-bar").find("input").on("mouseout",function(){s=!0,setTimeout(function(){s=!1},500),$(".search-bar").animate({width:"20px"},500)}),$(".main-photo-nav span").on("click",function(){if(!$(this).hasClass("current")){$(".main-photo-nav span").siblings("span").removeClass("current"),$(this).addClass("current"),$(".picture-content").css("display","none");var t=$(this).attr("id").split("_")[1];$("#content_"+t).css("display","block")}}),$(".close-btn").on("click",function(){$(".bigimg-content").css("display","none"),$("#bigImgList").find("li").removeClass("show"),$("body").css({height:"auto",overflow:"scroll"})}),$(".photo-item").on("click",".photo-box",function(){var s=parseInt($(this).attr("data-index"));$(".bigimg-content").css("display","block");var o=$(".bigimg-content").height();$("body").css({height:o,overflow:"hidden"}),$("#bigImgList li").eq(s).addClass("show"),0==s?$(".left-btn").addClass("disabled"):s==t.photoNum-1&&$(".right-btn").addClass("disabled")}),$(".arrow-btn").on("click",function(){if(!$(this).hasClass("disabled")){var s=$("#bigImgList .show"),o=parseInt(s.index()),i=o+("left"==$(this).attr("id")?-1:1);console.log(i),s.removeClass("show"),$("#bigImgList li").eq(i).addClass("show"),0==i?$(".left-btn").addClass("disabled"):i==t.photoNum-1?$(".right-btn").addClass("disabled"):i==t.photoNum-3?(t.myScroll=!1,t._getMorePhotos()):$(".arrow-btn").removeClass("disabled")}}),$(window).scroll(function(){if(t.myScroll){var s=$(this).scrollTop(),o=$(document).height(),i=$(this).height();s+i>=o-5&&(t.myScroll=!1,t._getMorePhotos())}})},_getPhotosDate:function(t){var s=this;$.ajax({url:"/hb/photos?n="+s.requestNum,dataType:"json",type:"GET",success:function(t){console.log(t),s.requestNum++,s.photoNum=t.result.length+s.photoNum;for(var o="",i="",e=0;e<t.result.length;e++)o='<div class="photo-box" data-index="'+e+'"><div class="photo-img"><img src="'+t.result[e].url+'?imageView2/2/w/300" alt=""></div><div class="photo-title">'+t.result[e].name+"</div></div>",0==e%3?$("#photoLeft").append(o):1==e%3?$("#photoCenter").append(o):$("#photoRight").append(o),i+='<li><img src="'+t.result[e].url+'" alt=""><p class="bigimg-title">'+t.result[e].name+"</p></li>";$(".content-loading").css("display","none"),$("#content_photo").css("display","block"),$("#bigImgList").append(i)}})},_getAlbumsDate:function(t){$.ajax({url:"/hb/albums",dataType:"json",type:"GET",success:function(t){console.log(t);for(var s="",o=0;o<t.result.length;o++)s+='<li><a href="/albums/'+t.result[o]._id+'"><div class="album-img"><img src="'+t.result[o].previewimg+'?imageView2/2/w/300" alt=""><i class="album-num">'+t.result[o].photos.length+'</i></div><div class="album-title">'+t.result[o].name+"</div></a></li>";$("#albumList").append(s)}})},_getMorePhotos:function(t){var s=this;$(".content-loading").css("display","block"),$.ajax({url:"/hb/photos?n="+s.requestNum,dataType:"json",type:"GET",success:function(t){console.log(t),s.requestNum++,s.photoNum=t.result.length+s.photoNum;for(var o="",i="",e=0;e<t.result.length;e++)o='<div class="photo-box" data-index="'+(e+15*(s.requestNum-1))+'"><div class="photo-img"><img src="'+t.result[e].url+'?imageView2/2/w/300" alt=""></div><div class="photo-title">'+t.result[e].name+"</div></div>",0==e%3?$("#photoLeft").append(o):1==e%3?$("#photoCenter").append(o):$("#photoRight").append(o),i+='<li><img src="'+t.result[e].url+'" alt=""><p class="bigimg-title">'+t.result[e].name+"</p></li>";$("#bigImgList").append(i),$(".content-loading").css("display","none"),s.myScroll=!0}})}};$(function(){o.init()})}]);